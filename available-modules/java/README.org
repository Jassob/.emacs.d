# -*- indent-tabs-mode: nil; -*-
#+TITLE: Java module
#+AUTHOR: Jassob
#+DATE: <2018-07-28>

* About this file
  This file contains the literate source of the Java module.

* Module

  I use Java Development Environment for Emacs (JDEE) which is a major
  mode for developing in Java. It gives a lot of support that
  full-blown IDEs gives, such as: syntax and error checking;
  dependency and project management support.

  I also want the =java-mode= to automatically load
  =common-code-mode=, so I get line numbering and all the other
  goodies.

  #+begin_src emacs-lisp :tangle module.el
    (use-package jdee :ensure t
      :config
      (add-hook 'java-mode-hook 'common-code-mode)
      (setq semanticdb-default-save-directory (concat cache-dir "semanticdb")))
  #+end_src

  One thing that JDEE does not do is to format the source
  code. =google-java-format= to the rescue!  Credits for
  =emacs-google-java-format.el= goes to
  http://github.com/sideshowcoder (source:
  https://github.com/sideshowcoder/emacs-google-java-format)

  #+begin_src emacs-lisp :tangle module.el
    ;; Load our local format code
    (load (concat user-emacs-directory "include/emacs-google-java-format.el"))
    (setq emacs-google-java-format-jar-path (concat cache-dir "google-java-format/"))
    (ignore-errors
      (emacs-google-java-format-setup-formatter))

    ;; Always format the buffer on save
    (bind-key (kbd "C-c C-f") 'emacs-google-java-format-reformat-buffer java-mode-map)
  #+end_src
